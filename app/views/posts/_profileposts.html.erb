

<% @posts.each do |post| %>
<%if current_user === post.user%>
<!--card header-->
  <div class="card gedf-card mb-3">
    <div class="card-header">
      <div class="d-flex justify-content-between align-items-center">
        <div class="d-flex justify-content-between align-items-center">
          <div class="mr-2">
              <img class="rounded-circle" width="45" src="https://picsum.photos/50/50" alt="">
          </div>
          
          <div class="ml-2">
            <div class="h5 m-0">@<%= post.user.username %></div> 
              <div class="h7 text-muted"><%= post.user.first_name  %> <%= post.user.last_name%></div> 
          </div>
        </div>

        <div>
          <div class="dropdown">
            <button class="btn btn-link dropdown-toggle" type="button" id="gedf-drop1" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                  <i class="fa fa-ellipsis-h"></i>
            </button>

              <div class="dropdown-menu dropdown-menu-right" aria-labelledby="gedf-drop1">
                <%= link_to 'Edit', edit_post_path(post), class:"dropdown-item" %>
                <%= link_to 'Delete', post, method: :delete, data: { confirm: 'Are you sure?' }, class:"dropdown-item" %>
              </div>
          </div>
        </div>
      </div>
    </div>

    <!--card body-->

    <div class="card-body">
      <div class="text-muted h7 mb-2"> <p><i class="fa fa-clock-o fa-fw"></i><%= time_ago_in_words(post.created_at, :limit => 1.day.ago).gsub('about','').gsub(/ mi.*/, 'm').gsub(/ h.*/, 'h')%> ago</p>
      </div>

        <h5 class="card-title"><%= post.post %></h5> <!--post.post -->
        <p class="card-text"> <!--text goes here--></p>
    </div>

<!--card footer-->
    <div class="card-footer">
        <%# <a href="#" class="card-link"><i class="fa fa-gittip"></i> Like</a> %>
        <!--Like link-->
        <a class="card-link">
          <i class="fa fa-gittip"></i>

          <% pre_like = post.likes.find {|like| like.user_id == current_user.id}%>

          <%if pre_like%>
            <%= link_to 'Unlike', post_like_path(post, pre_like), method: :delete %>
          <%else%>
            <%= link_to 'Like', post_likes_path(post), method: :post %>
          <%end%>
        </a>

        <!--Comment link-->
        <a href="#" class="card-link"><i class="fa fa-comment"></i> Comment</a>

        <!--Like Count-->
        <%= post.likes.count %> <%= (post.likes.count) == 1 ? 'Like' : 'Likes'%>
    </div>        

  </div>
  <%end %>

<% end %>

