<% @posts.each do |post| %>
<%if post %>
<div class="card gedf-card mb-3">
  <div class="card-header">
    <div class="d-flex justify-content-between align-items-center">
      <div class="d-flex justify-content-between align-items-center">
        <div class="mr-2">
          <img class="rounded-circle" width="45" src="https://picsum.photos/50/50" alt="">
        </div>

        <div class="ml-2">
          <div class="h5 m-0">@<%= post.user.username %></div> <!--post.user.username-->
          <div class="h7 text-muted"><%= post.user.first_name %><%= post.user.last_name %></div> <!-- post.user.first_name  post.user.last_name-->
        </div>
      </div>

      <div>
        <% if current_user === post.user %>
        <div class="dropdown">
          <button class="btn btn-link dropdown-toggle" type="button" id="gedf-drop1" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
            <i class="fa fa-ellipsis-h"></i>
          </button>

          <div class="dropdown-menu dropdown-menu-right" aria-labelledby="gedf-drop1">
            <%= link_to 'Edit', edit_post_path(post), class:"dropdown-item" %>
            <%= link_to 'Delete', post, method: :delete, data: { confirm: 'Are you sure?' }, class:"dropdown-item" %>
          </div>
        </div>
        <%end %>
      </div>
    </div>
  </div>

  <div class="card-body">
    <div class="text-muted h7 mb-2"> <i class="fa fa-clock-o"></i><%= time_ago_in_words(post.created_at, :limit => 1.day.ago).gsub('about','').gsub(/ mi.*/, 'm').gsub(/ h.*/, 'h')%> ago</div>
    <a class="card-link" href="#">

      <h5 class="card-title"><%= post.post %></h5>
      <p class="card-text"> <!--text goes here--></p>

    </a>
  </div>

  <div class="comment-box">
     <%= form_for @comment do |f| %>
       <%= f.hidden_field :user_id, value: current_user.id %>
       <%= f.hidden_field :post_id, value: post.id %>
       <div class="input-group-append">
       <%= f.text_field :body, placeholder: "Write a comment..." %>
       <div class="input-group-append">
       <%= f.submit "Post", class: "small-btn btn-success" %>
       </div>
       </div>
      <% end %>
     </div>

        <% post.comments.each do |comment| %>
          <strong class="comments-username"><%= comment.user.username %></strong>
          <div class="comments"><%= comment.body %></div>
          <div class="comments-time text-muted">
          <%= time_ago_in_words(comment.created_at, :limit => 1.day.ago).gsub('about','').gsub(/ mi.*/, 'm').gsub(/ h.*/, 'h').gsub(/ a.*/, ' 1m')%> ago
          </div>
        <% end %>
  <div class="card-footer">
    <a href="#" class="card-link"><i class="fa fa-gittip"></i> Like</a>
    <a href="#" class="card-link"><i class="fa fa-comment"></i> Comment</a>
  </div>

</div>
<% end %>
<% end %>
